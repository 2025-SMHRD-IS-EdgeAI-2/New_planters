/* =========================================
   report.css - 분석리포트 화면 스타일 (색상 누락 수정본)
   ========================================= */

/* 레이아웃 */
.report-layout { display: flex; gap: 24px; padding: 22px 0 56px; }
.report-side { border-right: 1px solid var(--line); }
.report-main { flex: 1; min-width: 0; }
.report-head__title { margin: 10px 0 6px; font-size: 26px; font-weight: 900; letter-spacing: -0.6px; }
.report-head__sub { margin: 0 0 18px; color: var(--muted); font-weight: 800; }
.report-panel.hidden { display: none; }

/* 숙련도 배너 */
.skill-banner { position: relative; display: flex; align-items: stretch; justify-content: space-between; border-radius: 18px; background: #05b64b; padding: 26px 26px; box-shadow: 0 10px 26px rgba(0,0,0,0.06); overflow: hidden; color: #fff; }
.skill-banner__content { max-width: 720px; }
.skill-badge { display: inline-flex; align-items: center; padding: 8px 12px; border-radius: 999px; background: rgba(255,255,255,0.16); font-weight: 900; font-size: 13px; }
.skill-score__num { font-size: 46px; font-weight: 900; letter-spacing: -1px; }
.skill-bar { height: 12px; border-radius: 999px; background: rgba(255,255,255,0.22); overflow: hidden; margin: 10px 0 10px; }
.skill-bar__fill { height: 100%; border-radius: 999px; background: rgba(255,255,255,0.92); }
.trophy-circle { width: 120px; height: 120px; border-radius: 999px; background: rgba(255,255,255,0.18); display: flex; align-items: center; justify-content: center; }
.trophy-emoji { font-size: 52px; }
@media (max-width: 980px){
  .skill-banner{ flex-direction: column; gap: 16px; }
  .skill-banner__trophy{ justify-content:flex-start; }
}

/* 카드 공통 */
.report-card { margin-top: 18px; border: 1px solid var(--line); border-radius: 18px; background: #fff; box-shadow: 0 10px 26px rgba(0,0,0,0.06); padding: 18px; }
.report-card__head { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }
.report-card__title { margin: 0; font-size: 16px; font-weight: 900; letter-spacing: -0.3px; }

/* ===== 레벨 시스템(A안): HTML(.level-steps/.level-step) 기준으로 매칭 ===== */
/* 리스트 컨테이너: (구버전 .level-list도 같이 지원) */
#report-skill .level-steps,
#report-skill .level-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* 카드: (구버전 .level-item도 같이 지원) */
#report-skill .level-step,
#report-skill .level-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;

  border: 1px solid rgba(148,163,184,0.25);
  border-radius: 16px;
  padding: 14px 14px;
  position: relative;
  background: #fff;

  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
}

/* 왼쪽 묶음(아이콘+텍스트) */
#report-skill .level-step-left {
  display: flex;
  align-items: center;
  gap: 12px;
  min-width: 0;
}

/* 아이콘을 dot처럼 보이게 */
#report-skill .level-icon {
  width: 32px;
  height: 32px;
  border-radius: 999px;
  display: grid;
  place-items: center;

  background: rgba(148,163,184,0.18);
  border: 1px solid rgba(148,163,184,0.28);
  font-size: 16px;
}

/* 텍스트 */
#report-skill .level-info { min-width: 0; }
#report-skill .level-title {
  font-weight: 900;
  letter-spacing: -0.2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
#report-skill .level-range {
  margin-top: 4px;
  font-size: 12px;
  color: #64748b;
  font-weight: 800;
}

/* 우측 pill */
#report-skill .level-pill {
  margin-left: auto;
  font-size: 12px;
  font-weight: 900;
  color: #0f172a;
  background: rgba(148,163,184,0.14);
  border: 1px solid rgba(148,163,184,0.22);
  padding: 7px 10px;
  border-radius: 999px;
  flex-shrink: 0;
}

/* ✅ 현재 레벨 강조: JS가 붙이는 is-current는 .level-step에 붙음 */
#report-skill .level-step.is-current,
#report-skill .level-item.is-current {
  border-color: rgba(34,197,94,0.55);
  background: rgba(34,197,94,0.06);
  box-shadow: 0 10px 22px rgba(2,132,199,0.08);
  animation: levelPulseSafe 1.6s ease-in-out infinite;
}

/* 은은한 shine (전체 화면 덮는 블러 X, 카드 내부만) */
#report-skill .level-step.is-current::before,
#report-skill .level-item.is-current::before {
  content:"";
  position:absolute;
  inset: 0;
  border-radius: 16px;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.55), transparent);
  transform: translateX(-120%);
  animation: levelShine 1.8s ease-in-out infinite;
  pointer-events:none;
  opacity: .55;
}

@keyframes levelPulseSafe {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-2px); }
}
@keyframes levelShine {
  0% { transform: translateX(-120%); }
  100% { transform: translateX(120%); }
}

/* (참고) 기존 dot 클래스는 HTML에 없으니 유지해도 영향 없음 */

/* ✨ [수정] 세부 점수 막대 (색상 및 높이 복구) */
.score-row { display: grid; grid-template-columns: 120px 1fr 88px; align-items: center; gap: 12px; }
.score-label { font-weight: 900; color: #0f172a; }
.score-bar { height: 10px; border-radius: 999px; background: rgba(148,163,184,0.22); overflow: hidden; }

/* 막대 채우기 스타일 (높이 100% 필수!) */
.score-fill { height: 100%; border-radius: 999px; }
.score-fill--blue { background: #3b82f6; }
.score-fill--green { background: #22c55e; }
.score-fill--gold { background: #f59e0b; }
.score-fill--purple { background: #a855f7; } /* 추가됨 */

.score-num { text-align: right; font-weight: 900; color: #0f172a; }

/* ✨ [수정] 업적 (잠김 상태 스타일 추가) */
.ach-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 14px; }
.ach-card { border-radius: 16px; padding: 16px; border: 1px solid rgba(148,163,184,0.25); text-align: center; }
.ach-icon { font-size: 30px; margin-bottom: 10px; }
.ach-name { font-weight: 900; letter-spacing: -0.2px; }
.ach-sub { margin-top: 6px; font-size: 12px; font-weight: 900; }

.ach-card.is-done { background: rgba(245,158,11,0.12); border-color: rgba(245,158,11,0.35); }
.ach-card.is-locked { opacity: 0.45; background: #f8fafc; } /* 추가됨 */

/* 데이터 통계 그래프 */
.stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 18px; margin-top: 16px; }
.stat-card { border: 1px solid var(--line); border-radius: 18px; background: #fff; box-shadow: 0 10px 26px rgba(0,0,0,0.06); padding: 18px 18px 16px; overflow: hidden; }
.stat-head { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
.stat-icon { width: 44px; height: 44px; border-radius: 14px; display: grid; place-items: center; font-size: 20px; font-weight: 900; background: #f1f5f9; }
.stat-title { font-weight: 900; letter-spacing: -0.2px; }
.stat-sub { margin-top: 2px; font-size: 12px; color: #64748b; font-weight: 800; }
.stat-chart { height: 170px; background: #f8fafc; border-radius: 14px; border: 1px solid rgba(148,163,184,0.25); }
.stat-x { display: flex; justify-content: space-around; gap: 10px; margin-top: 10px; font-size: 12px; color: #94a3b8; font-weight: 800; }
.stat-x--weeks { justify-content: space-between; padding: 0 6px; }
.stat-x--weeks span { display: flex; flex-direction: column; align-items: center; gap: 2px; min-width: 0; }
.stat-x--weeks b { font-weight: 900; color: #0f172a; }
.stat-x--weeks em { font-style: normal; font-size: 12px; color: #94a3b8; font-weight: 800; }

.stat-summary { margin-top: 14px; border-radius: 14px; padding: 14px 16px; border: 1px solid rgba(148,163,184,0.25); display: flex; align-items: flex-end; justify-content: space-between; gap: 12px; background: #f8fafc; }
.sum-label { font-size: 12px; color: #64748b; font-weight: 900; margin-bottom: 6px; }
.sum-value { font-size: 26px; font-weight: 900; letter-spacing: -0.4px; color: #0f172a; }
.sum-right { text-align: right; }
.sum-range { font-weight: 900; color: #0f172a; }
.water-sums { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 14px; }
.water-box { border-radius: 14px; padding: 14px 16px; border: 1px solid rgba(34,197,94,0.22); background: rgba(34,197,94,0.06); }

/* 컬러 테마 */
.stat-card--temp .stat-icon { background: rgba(239,68,68,0.12); }
.stat-card--hum .stat-icon { background: rgba(37,99,235,0.12); }
.stat-card--water .stat-icon { background: rgba(34,197,94,0.12); }
.stat-card--light .stat-icon { background: rgba(245,158,11,0.14); }

.stat-summary--temp { background: rgba(239,68,68,0.08); border-color: rgba(239,68,68,0.25); }
.stat-summary--hum { background: rgba(37,99,235,0.08); border-color: rgba(37,99,235,0.25); }
.stat-summary--light { background: rgba(245,158,11,0.10); border-color: rgba(245,158,11,0.25); }

/* 관리 습관 (Habit) */
.habit-kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-top: 14px; }
.habit-kpi { background: #fff; border: 1px solid #e5e7eb; border-radius: 16px; padding: 18px; box-shadow: 0 10px 26px rgba(0,0,0,0.06); display: flex; gap: 14px; }
.habit-week { margin-top: 10px; display: grid; grid-template-columns: repeat(7, 1fr); gap: 14px; align-items: end; padding: 18px 16px 6px; border-top: 1px solid #eef2f7; }
.habit-bar { width: 100%; height: 140px; display: flex; flex-direction: row !important; align-items: flex-end; justify-content: center; gap: 4px; }
.habit-bar .seg { display: block; width: 12px; border-radius: 4px 4px 2px 2px; transition: height 0.3s ease; }
.habit-bar .seg.is-water { background: #2d7df6; }
.habit-bar .seg.is-mist { background: #0ea5e9; }
.habit-bar .seg.is-log { background: #a855f7; }
.habit-legend { display: flex; gap: 18px; justify-content: center; align-items: center; padding: 14px 0 2px; border-top: 1px solid #e5e7eb; margin-top: 8px; }
.legend-item .dot { width: 10px; height: 10px; border-radius: 4px; display: inline-block; }
.insight-list { display: flex; flex-direction: column; gap: 12px; margin-top: 10px; }
.insight { border-radius: 14px; padding: 14px 16px; border: 2px solid transparent; }
.insight.is-green { background: #ecfdf5; border-color: #86efac; }

/* shine/애니메이션이 밖으로 새지 않게 카드에서 잘라버리기 */
#report-skill .level-step,
#report-skill .level-item {
  overflow: hidden;
}

/* 혹시 다른 요소도 삐져나오면 report 전체에서 가로 스크롤 차단 */
#page-report {
  overflow-x: hidden;
}

#report-skill .level-system h3 {
  font-size: 22px;
  font-weight: 800;
  letter-spacing: -0.6px;
  color: #111827;
}

#report-skill .level-summary,
#report-skill .level-progress-meta {
  font-family: "Pretendard", sans-serif;
  font-size: 14px;
  font-weight: 500;
  letter-spacing: -0.1px;
  color: #334155;
}

/* ===== [Habit 정렬 보강] 월~일 라벨을 막대 아래로 + 범례 dot 색상 ===== */

/* 1) 각 요일 컬럼: 막대 위, 라벨 아래(세로 정렬) */
.habit-day{
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-end;
  gap: 8px;
  min-width: 0;
}

/* 라벨을 확실히 아래로 */
.habit-day__label{
  display: block;
  font-size: 12px;
  font-weight: 900;
  color: #0f172a;
  line-height: 1;
  margin-top: 2px;
}

/* 2) 막대 영역: 가운데 정렬 유지 + 높이 고정 */
.habit-bar{
  width: 100%;
  height: 140px;            /* 기존 유지 */
  display: flex;
  align-items: flex-end;
  justify-content: center;
  gap: 6px;                 /* 살짝 여유 */
}

/* 3) 범례 dot에 색 지정 (그래프 순서: 기록 -> 분무 -> 물주기) */
.habit-legend .dot{
  margin-right: 8px;
  vertical-align: middle;
}

.habit-legend .dot.is-log  { background: #a855f7; }  /* 기록 */
.habit-legend .dot.is-mist { background: #0ea5e9; }  /* 분무 */
.habit-legend .dot.is-water{ background: #2d7df6; }  /* 물주기 */

/* 4) (선택) KPI 카드 내부 세로 정렬 깔끔하게 */
.habit-kpi{
  align-items: flex-start;
}

.habit-kpi__label{ margin: 0 0 6px; font-weight: 900; }
.habit-kpi__value{ margin: 0 0 8px; font-weight: 900; }
.habit-kpi__desc{ margin: 0; color: #64748b; font-weight: 700; line-height: 1.4; }
